#LyX 2.0 created this file. For more info see http://www.lyx.org/
\lyxformat 413
\begin_document
\begin_header
\textclass article
\use_default_options true
\maintain_unincluded_children false
\language english
\language_package default
\inputencoding auto
\fontencoding global
\font_roman default
\font_sans default
\font_typewriter default
\font_default_family default
\use_non_tex_fonts false
\font_sc false
\font_osf false
\font_sf_scale 100
\font_tt_scale 100

\graphics default
\default_output_format default
\output_sync 0
\bibtex_command default
\index_command default
\paperfontsize default
\use_hyperref false
\papersize default
\use_geometry false
\use_amsmath 1
\use_esint 1
\use_mhchem 1
\use_mathdots 1
\cite_engine basic
\use_bibtopic false
\use_indices false
\paperorientation portrait
\suppress_date false
\use_refstyle 1
\index Index
\shortcut idx
\color #008000
\end_index
\secnumdepth 3
\tocdepth 3
\paragraph_separation indent
\paragraph_indentation default
\quotes_language english
\papercolumns 1
\papersides 1
\paperpagestyle default
\tracking_changes false
\output_changes false
\html_math_output 0
\html_css_as_file 0
\html_be_strict false
\end_header

\begin_body

\begin_layout Title
Multi-sided Surfacing Library v1.0
\end_layout

\begin_layout Author
ShapEx Ltd., Budapest
\end_layout

\begin_layout Date
February 20, 2016
\end_layout

\begin_layout Standard
This library has been developed for HCL America, Inc.
\begin_inset space ~
\end_inset

and The Boeing Company, within the framework of the project ``
\emph on
A software library for multi-sided surfacing in the Boeing Geoduck system
\emph default
''.
\end_layout

\begin_layout Standard
This document consist of the following sections: Section
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Conventional-Geometry"

\end_inset

 gives a short review on the geometric entities supplied by our support
 library.
 Section
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Transfinite-Surfaces"

\end_inset

 explains the multi-sided representations offered by this package, and their
 usage in the C++ layer.
 Section
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Python-Interface"

\end_inset

 shows the Python interface to be merged with Geoduck; an example session
 illustrates its use in the Appendix.
\end_layout

\begin_layout Section
\begin_inset CommandInset label
LatexCommand label
name "sec:Conventional-Geometry"

\end_inset

Conventional Geometry
\end_layout

\begin_layout Standard
Conventional geometric entities are provided by a shared library, and are
 accessed through the header file 
\family typewriter
geometry.hh
\family default
.
 The main classes defined there are as follows:
\end_layout

\begin_layout Itemize

\family typewriter
Vector2D
\family default
, 
\family typewriter
Vector3D
\family default
: 2- and 3-dimensional vectors, with the usual operators.
\end_layout

\begin_layout Itemize

\family typewriter
Point2D
\family default
, 
\family typewriter
Point3D
\family default
: Aliases for 
\family typewriter
Vector2D
\family default
 and 
\family typewriter
Vector3D
\family default
.
\end_layout

\begin_layout Itemize

\family typewriter
DoubleVector
\family default
, 
\family typewriter
Vector2DVector
\family default
, 
\family typewriter
Point2DVector
\family default
, etc.: Aliases for STL vectors containing the respective objects.
\end_layout

\begin_layout Itemize

\family typewriter
BSCurve
\family default
: A (non-rational) B-spline curve.
\end_layout

\begin_layout Itemize

\family typewriter
BSSurface
\family default
: A (non-rational) B-spline surface, with or without trimming.
 This is a dummy class only for data transfer.
\end_layout

\begin_layout Itemize

\family typewriter
TriMesh
\family default
: A triangle mesh, capable of writing Wavefront 
\family typewriter
.obj
\family default
 files via 
\family typewriter
writeOBJ
\family default
(
\emph on
filename
\emph default
).
\end_layout

\begin_layout Itemize

\family typewriter
IGES
\family default
: An IGES file writer, exporting the function 
\family typewriter
writeSurface
\family default
(
\emph on
surface
\emph default
).
\end_layout

\begin_layout Section
\begin_inset CommandInset label
LatexCommand label
name "sec:Transfinite-Surfaces"

\end_inset

Transfinite Surfaces
\end_layout

\begin_layout Standard
The general interface for handling transfinite interpolation surfaces is
 in the header file 
\family typewriter
surface.hh
\family default
.
 It defines the abstract class 
\family typewriter
Transfinite::Surface
\family default
, which provides several functions (detailed below).
 For actual use, one has to use a child class---presently there are five
 options: 
\family typewriter
SurfaceSideBased
\family default
, 
\family typewriter
Surface\SpecialChar \-
Corner\SpecialChar \-
Based
\family default
, 
\family typewriter
SurfaceGeneralizedCoons
\family default
, 
\family typewriter
SurfaceCompositeRibbon
\family default
, corresponding to the patch types SB, CB, GC and CR in 
\begin_inset CommandInset citation
LatexCommand cite
key "cagd"

\end_inset

, respectively, as well as 
\family typewriter
SurfaceGeneralizedBezier
\family default
 and 
\family typewriter
SurfaceMidpoint
\family default
, implementing the GB patch 
\begin_inset CommandInset citation
LatexCommand cite
key "bezier"

\end_inset

 and the MP patch 
\begin_inset CommandInset citation
LatexCommand cite
key "midpoint"

\end_inset

, respectively.
 One- and two-sided surfaces are not supported.
\end_layout

\begin_layout Subsection
Surface Details
\end_layout

\begin_layout Standard
Transfinite interpolation patches have several constituents, such as ribbon
 surfaces, domain polygons, parameterization mappings, or blending functions.
 The above surface types already define the blending functions, but there
 are several choices in all of the other parameters.
\end_layout

\begin_layout Subsubsection*
Ribbons
\end_layout

\begin_layout Standard
In this library, we have only one ribbon type, implemented in 
\family typewriter
Ribbon\SpecialChar \-
Compatible
\family default
 (GB patches do not need ribbons, so they have a dummy type 
\family typewriter
RibbonDummy
\family default
).
 This can be formulated as follows (using the notations of 
\begin_inset CommandInset citation
LatexCommand cite
key "cagd"

\end_inset

):
\begin_inset Formula 
\[
R_{i}(s,d)=P_{i}(s)+\left[-P_{i-1}^{\prime}(1)^{\perp}\cdot(1-s)+P_{i+1}^{\prime}(0)^{\perp}\cdot s\right]\cdot d,
\]

\end_inset

where 
\begin_inset Formula $v^{\perp}$
\end_inset

 is the vector 
\begin_inset Formula $v$
\end_inset

 projected into the tangent plane at the current point, i.e.,
\begin_inset Formula 
\[
v^{\perp}=v-n(vn),
\]

\end_inset


\begin_inset Formula $n$
\end_inset

 being the unit normal vector obtained by a rotation minimizing frame 
\begin_inset CommandInset citation
LatexCommand cite
key "rmf"

\end_inset

 between the normals of the end vertices.
\end_layout

\begin_layout Standard
Ribbons can also have 
\emph on
ribbon handlers
\emph default
 (unit vectors defining the central direction) and 
\emph on
multipliers
\emph default
 (a quantity that pulls or pushes the center of the ribbon).
 This variation is implemented in 
\family typewriter
RibbonCompatibleWithHandler
\family default
, which uses the following equation:
\begin_inset Formula 
\[
R_{i}(s,d)=P_{i}(s)+\left[-P_{i-1}^{\prime}(1)^{\perp}\cdot\alpha_{0}(s)+T_{i}(0.5)^{\perp}\cdot\alpha_{1}(s)+P_{i+1}^{\prime}(0)^{\perp}\cdot\alpha_{2}(s)\right]\cdot d,
\]

\end_inset

where
\begin_inset Formula 
\[
\alpha_{0}(s)=2(s-1)(s-0.5),\quad\alpha_{1}(s)=-4(s-1)s,\quad\alpha_{2}(s)=2(s-0.5)s,
\]

\end_inset

and 
\begin_inset Formula $T_{i}(0.5)$
\end_inset

 can be computed as
\begin_inset Formula 
\[
T_{i}(0.5)=H_{i}\cdot\frac{\left\Vert P_{i-1}^{\prime}(1)\right\Vert +\left\Vert P_{i+1}^{\prime}(0)\right\Vert }{2}\cdot m_{i},
\]

\end_inset

with 
\begin_inset Formula $H_{i}$
\end_inset

 and 
\begin_inset Formula $m_{i}$
\end_inset

 being the ribbon handler and multiplier of the ribbon, respectively.
 Note, that this is constant w.r.t.
\begin_inset space ~
\end_inset


\begin_inset Formula $s$
\end_inset

 and 
\begin_inset Formula $d$
\end_inset

, so it is precomputed.
 The default direction is computed as
\begin_inset Formula 
\[
H_{i}=\left(P_{i-1}^{\prime}(1)^{0}+P_{i+1}^{\prime}(0)^{0}\right)^{\perp^{0}},
\]

\end_inset

where 
\begin_inset Formula $v^{0}=v/\left\Vert v\right\Vert $
\end_inset

 is the unit vector in the direction of 
\begin_inset Formula $v$
\end_inset

.
 The default multiplier is 
\begin_inset Formula $m_{i}=1$
\end_inset

.
\end_layout

\begin_layout Subsubsection*
Domain Polygons
\end_layout

\begin_layout Standard
There are three domain polygon computations implemented in the library.
 The simplest is 
\family typewriter
DomainRegular
\family default
, which uses a regular 
\begin_inset Formula $n$
\end_inset

-sided polygon as the domain.
 There is also 
\family typewriter
DomainCircular
\family default
, where an 
\begin_inset Formula $n$
\end_inset

-sided cyclic polygon is constructed in such a way that the central angles
 and the arc lengths of the boundary curves have a constant ratio, and 
\family typewriter
DomainAngular
\family default
, that takes both arc lengths and angles into consideration.
 For a detailed description of these methods, see
\begin_inset space ~
\end_inset


\begin_inset CommandInset citation
LatexCommand cite
key "cad"

\end_inset

.
 SP patches use the angular domain, and all other surface types employ the
 regular domain.
\end_layout

\begin_layout Subsubsection*
Parameterization
\end_layout

\begin_layout Standard
Each of the patches has its own parameterization.
 For details on these mappings, see
\begin_inset space ~
\end_inset


\begin_inset CommandInset citation
LatexCommand cite
key "cagd"

\end_inset

.
\end_layout

\begin_layout Itemize
SB patches use parallel parameterization (
\family typewriter
ParameterizationParallel
\family default
): 
\begin_inset Formula $s$
\end_inset

 is linear, as in the bilinear parameterization, and 
\begin_inset Formula $d$
\end_inset

 is proportional to the perpendicular distance to the base side, with the
 farthest vertex set to 
\begin_inset Formula $d=1$
\end_inset

.
\end_layout

\begin_layout Itemize
CB patches use bilinear parameterization (
\family typewriter
Parameterization\SpecialChar \-
Bilinear
\family default
), or more correctly, linear parameterization, since this representation
 uses only side parameters.
\end_layout

\begin_layout Itemize
GC patches use bilinear-based interconnected parameterization (
\family typewriter
Para\SpecialChar \-
meterizationInterconnected
\family default
).
\end_layout

\begin_layout Itemize
CR, GB and MP patches use a parameterization based on Wachspress coordinates
 
\begin_inset Formula $\lambda_{i}$
\end_inset

 (
\begin_inset Formula $i\in[1\dots n]$
\end_inset

): 
\lang american

\begin_inset Formula 
\begin{eqnarray*}
s_{i} & = & \lambda_{i}/\left(\lambda_{i-1}+\lambda_{i}\right),\\
d_{i} & = & 1-\lambda_{i-1}-\lambda_{i},
\end{eqnarray*}

\end_inset


\lang english
implemented in 
\family typewriter
ParameterizationBarycentric
\family default
.
 (This computation of the 
\begin_inset Formula $s$
\end_inset

 parameter is not published yet.)
\end_layout

\begin_layout Subsection
Surface Creation
\end_layout

\begin_layout Standard
After creating a surface object of the desired type, the following steps
 finalize the surface:
\end_layout

\begin_layout Enumerate
Set the boundary curves using 
\family typewriter
setCurves
\family default
(
\emph on
curves
\emph default
).
 Alternatively curves can be set one by one, using 
\family typewriter
setCurve
\family default
(
\emph on
i
\emph default
, 
\emph on
curve
\emph default
) to set the 
\begin_inset Formula $i$
\end_inset

-th curve.
\end_layout

\begin_layout Enumerate
Call 
\family typewriter
setupLoop
\family default
() to normalize the curves and fill in adjacency information.
 This function has to be called every time a new curve is assigned to the
 surface.
\end_layout

\begin_layout Enumerate
Call 
\family typewriter
setRibbonMultiplier
\family default
(
\emph on
i
\emph default
, 
\emph on
multiplier
\emph default
) and 
\family typewriter
setRibbonHandler
\family default
(
\emph on
i
\emph default
, 
\emph on
handler
\emph default
) to set the central behavior of the 
\emph on
i
\emph default
-th ribbon.
 (Only applicable when using ribbons with handlers, which should be perpendicula
r to the normal.)
\end_layout

\begin_layout Enumerate
Call 
\family typewriter
update
\family default
() to generate ribbons and clear the cache.
 This function has to be called every time the edges (or their ribbon handlers
 / multipliers) have been changed.
 If only the 
\begin_inset Formula $i$
\end_inset

-th curve has changed, it is sufficient to call 
\family typewriter
update
\family default
(
\emph on
i
\emph default
).
 (But if the end tangent of the curve changes, 
\family typewriter
update
\family default
 should be called for the adjacent side, as well.)
\end_layout

\begin_layout Enumerate
Use of the 
\begin_inset Formula $\gamma$
\end_inset

 function 
\begin_inset CommandInset citation
LatexCommand cite
key "cagd"

\end_inset

 can be turned off by 
\family typewriter
setGamma
\family default
(
\family typewriter
false
\family default
).
 It is on by default.
\end_layout

\begin_layout Standard
The mechanics of GB patches are a little different, as they depend on a
 control network:
\end_layout

\begin_layout Enumerate
Initialize the network by calling 
\family typewriter
initNetwork
\family default
(
\emph on
n
\emph default
, 
\emph on
d
\emph default
), where 
\emph on
n
\emph default
 is the number of sides, and 
\emph on
d
\emph default
 is the degree.
\end_layout

\begin_layout Enumerate
Set all control points, using 
\family typewriter
setCentralControlPoint
\family default
(
\emph on
p
\emph default
) for the center point, and 
\family typewriter
setControlPoint
\family default
(
\emph on
i
\emph default
, 
\emph on
j
\emph default
, 
\emph on
k
\emph default
, 
\emph on
p
\emph default
) for all other points.
 The latter function sets 
\begin_inset Formula $C_{j,k}^{d,i}$
\end_inset

 in the notation of 
\begin_inset CommandInset citation
LatexCommand cite
key "bezier"

\end_inset

.
\end_layout

\begin_layout Enumerate
Call 
\family typewriter
setupLoop
\family default
() to extract the curves and fill in adjacency information.
\end_layout

\begin_deeper
\begin_layout Standard
Note, that you do not have to call 
\family typewriter
update
\family default
().
 (Actually, you 
\emph on
should not
\emph default
.) Unless the number of sides or the degree (i.e., the topology of the control
 network) changes, changing control points do not need any special administratio
n.
 Also, in step 3, 
\family typewriter
setupLoop
\family default
 only assumes that boundary control points are set.
 Any other control points can be set later.
\end_layout

\end_deeper
\begin_layout Standard
Finally, the fullness of MP patches can be controlled by setting its middle
 point by calling 
\family typewriter
setMidpoint
\family default
(
\emph on
p
\emph default
).
 The default position can be restored by 
\family typewriter
unsetMidpoint
\family default
().
 Both of these functions assume that the patch is already fully initialized
 (as in 1--5 above).
\end_layout

\begin_layout Subsection
Evaluation
\end_layout

\begin_layout Standard
A point 
\begin_inset Formula $p$
\end_inset

 in the 2D domain can be evaluated by calling 
\family typewriter
eval
\family default
(
\emph on
p
\emph default
).
 For convenience, there is an overloaded function that evaluates the surface
 using a given resolution, thereby creating a triangle mesh: 
\family typewriter
eval
\family default
(
\emph on
resolution
\emph default
).
\end_layout

\begin_layout Subsection
\begin_inset CommandInset label
LatexCommand label
name "sub:Fitting"

\end_inset

Fitting
\end_layout

\begin_layout Standard
There are two options for fitting quadrilateral B-spline surfaces.
\end_layout

\begin_layout Subsubsection*
Central Split
\end_layout

\begin_layout Standard
This method splits the 
\begin_inset Formula $n$
\end_inset

-sided transfintie surface into 
\begin_inset Formula $n$
\end_inset

 quadrilaterals, and fits a B-spline surface on each of them.
 (Except in the 4-sided case, where only one B-spline surface is used.) The
 function for this is 
\family typewriter
fitCentralSplit
\family default
(
\emph on
ftol
\emph default
, 
\emph on
ktol
\emph default
, 
\emph on
density
\emph default
).
 The parameters are:
\end_layout

\begin_layout Itemize

\emph on
ftol
\emph default
 is the main fitting tolerance to be achieved.
\end_layout

\begin_layout Itemize

\emph on
ktol
\emph default
 is the knot snapping tolerance, which is the smallest allowed difference
 between two knot values.
 As very close knots can cause artefacts, we recommend setting this value
 to at least 0.01 (curves are normalized to the interval [0,1]).
\end_layout

\begin_layout Itemize

\emph on
density
\emph default
 is the sampling density for the subdividing curves, the default is set
 to 30.
\end_layout

\begin_layout Subsubsection*
Trimming
\end_layout

\begin_layout Standard
This method fits a larger B-spline surface on the 
\begin_inset Formula $n$
\end_inset

-sided patch, and trims the sides with the original boundary curves.
 The function for this is 
\family typewriter
fitTrimmed
\family default
(
\emph on
ftol
\emph default
, 
\emph on
resolution
\emph default
, 
\emph on
maxu
\emph default
, 
\emph on
maxv
\emph default
, 
\emph on
wcurv
\emph default
, 
\emph on
wosc
\emph default
).
 The parameters are:
\end_layout

\begin_layout Itemize

\emph on
ftol
\emph default
 is the main fitting tolerance to be achieved.
\end_layout

\begin_layout Itemize

\emph on
resolution
\emph default
 is the surface's sampling resolution, as in 
\family typewriter
eval
\family default
.
 Defaults to 15.
\end_layout

\begin_layout Itemize

\emph on
maxu
\emph default
 and 
\emph on
maxv
\emph default
 are the maximum number of control points in the 
\emph on
u
\emph default
 and 
\emph on
v
\emph default
 directions, respectively.
 These are needed because of the idiosyncrasies of the fitting algorithm.
 The default is 12 in both directions.
\end_layout

\begin_layout Itemize

\emph on
wcurv
\emph default
 and 
\emph on
wosc
\emph default
 are the curvature and oscilliation minimization weights, respectively.
 The default is 1e-6 for both.
\end_layout

\begin_layout Section
\begin_inset CommandInset label
LatexCommand label
name "sec:Python-Interface"

\end_inset

Python Interface
\end_layout

\begin_layout Standard
In Python, we have supplied one command, 
\family typewriter
transfiniteSurface
\family default
(
\emph on
curve_list
\emph default
, 
\emph on
surface_type
\emph default
, 
\emph on
split_or_trim
\emph default
, 
\emph on
tolerance
\emph default
), that creates a B-spline surface from a list of boundary curves.
 The following sections explain the arguments one by one.
\end_layout

\begin_layout Subsection
\begin_inset CommandInset label
LatexCommand label
name "sub:Curve-List"

\end_inset

Curve List
\end_layout

\begin_layout Standard
Boundary curves are given as [
\emph on
curves
\emph default
], i.e., a python list of curves.
 Each curve is represented as a tuple: (
\emph on
degree
\emph default
, [
\emph on
knots
\emph default
], [
\emph on
points
\emph default
]).
 Knots are float values, points are lists of three floats.
 An example curve looks like this: (3,[0,0,0,0,1,1,1,1], [[0,0,0],[1,1,0],[2,1,1
],[3,0,1]]).
\end_layout

\begin_layout Standard
There are a few assumptions about the curve list:
\end_layout

\begin_layout Itemize
There are at least 3 curves in the list.
 Two-sided surfaces are not supported.
\end_layout

\begin_layout Itemize
The curves are given in sequence, i.e., they represent the boundary edges
 of the surface in a clockwise or anti-clockwise manner.
 The parameterization of the curves can be arbitrary.
\end_layout

\begin_layout Itemize
Adjacent curves should enclose an angle between (around) 10 and 170 degrees.
 Angles outside this range can cause the surface to twist out of its boundary
 loop.
\end_layout

\begin_layout Subsection
Surface Type
\end_layout

\begin_layout Standard
This determines the representation to use.
 It can be one of the following strings: 'SB', 'CB', 'GC', or 'CR', as explained
 in Section
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Transfinite-Surfaces"

\end_inset

.
\end_layout

\begin_layout Subsection
Split or Trim
\end_layout

\begin_layout Standard
This option chooses the fitting method (see Section
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "sub:Fitting"

\end_inset

).
 It can be one of the following strings: 'split' or 'trim'.
\end_layout

\begin_layout Subsection
Tolerance
\end_layout

\begin_layout Standard
This is the fitting tolerance (
\emph on
ftol
\emph default
 in Section
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "sub:Fitting"

\end_inset

).
\end_layout

\begin_layout Subsection
Return Value
\end_layout

\begin_layout Standard
The type of the return value depends on the fitting method.
\end_layout

\begin_layout Subsubsection*
Split
\end_layout

\begin_layout Standard
The central split method always returns with a list of surfaces.
 For four-sided surfaces, this will be a one-element list, but for 
\begin_inset Formula $n$
\end_inset

-sided patches it will have 
\begin_inset Formula $n$
\end_inset

 elements.
 Each surface is represented as a tuple: (
\emph on
deg_u
\emph default
, 
\emph on
deg_v
\emph default
, [
\emph on
knots_u
\emph default
], [
\emph on
knots_v
\emph default
], [
\emph on
points
\emph default
]).
 The control points are stored in row-major order.
\end_layout

\begin_layout Subsubsection*
Trim
\end_layout

\begin_layout Standard
With this option, the return value is a single trimmed surface, represented
 as a tuple: (
\emph on
surface
\emph default
, [
\emph on
param_curves
\emph default
]).
 Here the second item of the tuple is a list of trimming curves in the parameter
 domain---their definition is the same as in Section
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "sub:Curve-List"

\end_inset

, but using two-dimensional points.
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "cagd"

\end_inset

P.
\begin_inset space ~
\end_inset

Salvi, T.
\begin_inset space ~
\end_inset

Várady, A.
\begin_inset space ~
\end_inset

Rockwood, 
\emph on
Ribbon-based Transfinite Surfaces
\emph default
.
 Computer Aided Geometric Design, Vol.
\begin_inset space ~
\end_inset

31(9), pp.
\begin_inset space ~
\end_inset

613--630, 2014.
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "midpoint"

\end_inset

P.
\begin_inset space ~
\end_inset

Salvi, T.
\begin_inset space ~
\end_inset

Várady, 
\emph on
Multi-sided Surfaces with Fullness Control
\emph default
.
 Eighth Hungarian Conference on Computer Graphics and Geometry, 2016 (submitted).
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "cad"

\end_inset

T.
\begin_inset space ~
\end_inset

Várady, A.
\begin_inset space ~
\end_inset

Rockwood, P.
\begin_inset space ~
\end_inset

Salvi, 
\emph on
Transfinite Surface Interpolation over Irregular 
\begin_inset Formula $n$
\end_inset

-sided Domains
\emph default
.
 Computer Aided Design, Vol.
\begin_inset space ~
\end_inset

43(11), pp\SpecialChar \@.

\begin_inset space ~
\end_inset

1330--1340, 2011.
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "bezier"

\end_inset

T.
\begin_inset space ~
\end_inset

Várady, P.
\begin_inset space ~
\end_inset

Salvi, Gy.
\begin_inset space ~
\end_inset

Karikó, 
\emph on
A Multi-sided Bézier Patch with a Simple Control Structure
\emph default
.
 Computer Graphics Forum 35(2), 2016 (accepted).
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "rmf"

\end_inset

W.
\begin_inset space ~
\end_inset

Wang, B.
\begin_inset space ~
\end_inset

Jüttler, D.
\begin_inset space ~
\end_inset

Zheng, Y.
\begin_inset space ~
\end_inset

Liu, 
\emph on
Computation of Rotation Minimizing Frames
\emph default
.
 Transactions on Graphics, Vol.
\begin_inset space ~
\end_inset

27(1), p.
\begin_inset space ~
\end_inset

2, 2008.
\begin_inset Newpage pagebreak
\end_inset


\end_layout

\begin_layout Section*
\start_of_appendix
Appendix -- Example Session
\end_layout

\begin_layout Standard
This is a transcript of a demo session.
 The output is formatted and commented.
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{verbatim}
\end_layout

\begin_layout Plain Layout

$ python
\end_layout

\begin_layout Plain Layout

Python 2.7.6 (default, Jun 22 2015, 18:00:18)
\end_layout

\begin_layout Plain Layout

[GCC 4.8.2] on linux2
\end_layout

\begin_layout Plain Layout

Type "help", "copyright", "credits" or "license" for more information.
 
\end_layout

\begin_layout Plain Layout

>>> import pytransurf
\end_layout

\begin_layout Plain Layout

>>> curve1 = (3, [0,0,0,0,0.267,0.694,1,1,1,1],
\end_layout

\begin_layout Plain Layout

              [[53.918,-100,      8.475],
\end_layout

\begin_layout Plain Layout

               [56.646, -92.446,  9.017],
\end_layout

\begin_layout Plain Layout

               [59.028, -71.846,  7.977],
\end_layout

\begin_layout Plain Layout

               [44.362,   7.722,  8.555],
\end_layout

\begin_layout Plain Layout

               [12.857,  11.697,  8.492],
\end_layout

\begin_layout Plain Layout

               [ 0.019,  11.841,  8.485]])
\end_layout

\begin_layout Plain Layout

>>> curve2 = (3, [0,0,0,0,0.538,1,1,1,1],
\end_layout

\begin_layout Plain Layout

              [[ 0.019,  11.841,  8.485],
\end_layout

\begin_layout Plain Layout

               [ 0.846,  -8.867, -2.257],
\end_layout

\begin_layout Plain Layout

               [ 0.145, -52.128,-28.903],
\end_layout

\begin_layout Plain Layout

               [ 0.602, -89.791,-24.169],
\end_layout

\begin_layout Plain Layout

               [ 0.414,-107.179,-23.856]])
\end_layout

\begin_layout Plain Layout

>>> curve3 = (3, [0,0,0,0,0.594,1,1,1,1],
\end_layout

\begin_layout Plain Layout

              [[ 0.414,-107.179,-23.856],
\end_layout

\begin_layout Plain Layout

               [12.999,-107.324,-24.444],
\end_layout

\begin_layout Plain Layout

               [36.495,-101.455,  0.997],
\end_layout

\begin_layout Plain Layout

               [47.675,-100.196,  6.224],
\end_layout

\begin_layout Plain Layout

               [53.918,-100,      8.475]])
\end_layout

\begin_layout Plain Layout

>>> pytransurf.transfiniteSurface([curve1,curve2,curve3],'SB','trim',0.01)
\end_layout

\begin_layout Plain Layout

((3, 3, # surface - deg_u, deg_v
\end_layout

\begin_layout Plain Layout

  # knots_u:
\end_layout

\begin_layout Plain Layout

  [-0.852, -0.852, -0.852, -0.852, -0.737, -0.622,
\end_layout

\begin_layout Plain Layout

   -0.393, -0.278, -0.163, -0.048,  0.066,  0.296,
\end_layout

\begin_layout Plain Layout

    0.525,  0.984,  0.984,  0.984,  0.984],
\end_layout

\begin_layout Plain Layout

  # knots_v:
\end_layout

\begin_layout Plain Layout

  [-0.983, -0.983, -0.983, -0.983, -0.816, -0.650,
\end_layout

\begin_layout Plain Layout

   -0.483, -0.317, -0.150,  0.016,  0.349,  0.349,
\end_layout

\begin_layout Plain Layout

    0.349,  0.349],
\end_layout

\begin_layout Plain Layout

  # control points:
\end_layout

\begin_layout Plain Layout

  [[  85.087,  -82.085,    7.180], [  80.178,  -85.204,    9.018],
\end_layout

\begin_layout Plain Layout

   [  70.991,  -91.119,   11.041], [  58.975,  -98.104,   10.299],
\end_layout

\begin_layout Plain Layout

   [  48.430, -102.225,    6.733], [  39.891, -105.378,    1.821],
\end_layout

\begin_layout Plain Layout

   [  33.204, -109.389,   -5.230], [  25.403, -115.675,  -13.595],
\end_layout

\begin_layout Plain Layout

   [  19.314, -121.315,  -15.553], [  14.554, -125.744,  -14.559],
\end_layout

\begin_layout Plain Layout

   [  83.860,  -79.544,    8.350], [  78.875,  -82.440,    9.956],
\end_layout

\begin_layout Plain Layout

   [  69.745,  -88.028,   11.449], [  58.072,  -94.833,    9.757],
\end_layout

\begin_layout Plain Layout

   [  47.602,  -99.366,    6.313], [  39.127, -103.044,    1.195],
\end_layout

\begin_layout Plain Layout

   [  32.273, -107.286,   -5.509], [  24.127, -113.692,  -13.733],
\end_layout

\begin_layout Plain Layout

   [  18.249, -119.372,  -16.843], [  13.485, -123.744,  -16.808],
\end_layout

\begin_layout Plain Layout

   [  81.444,  -74.226,   10.086], [  76.424,  -76.835,   11.187],
\end_layout

\begin_layout Plain Layout

   [  67.396,  -82.013,   11.840], [  56.228,  -88.664,    8.754],
\end_layout

\begin_layout Plain Layout

   [  45.963,  -93.797,    5.114], [  37.519,  -98.295,   -0.060],
\end_layout

\begin_layout Plain Layout

   [  30.434, -103.048,   -6.526], [  21.758, -109.777,  -14.663],
\end_layout

\begin_layout Plain Layout

   [  15.826, -115.538,  -19.116], [  11.017, -119.846,  -20.339],
\end_layout

\begin_layout Plain Layout

   [  76.605,  -62.936,   11.756], [  71.738,  -65.373,   11.919],
\end_layout

\begin_layout Plain Layout

   [  63.011,  -70.213,   10.912], [  52.206,  -77.010,    6.780],
\end_layout

\begin_layout Plain Layout

   [  42.743,  -83.137,    1.930], [  34.473,  -88.929,   -3.702],
\end_layout

\begin_layout Plain Layout

   [  26.942,  -94.636,  -10.028], [  17.111, -102.204,  -17.791],
\end_layout

\begin_layout Plain Layout

   [  10.058, -108.268,  -22.249], [   4.879, -112.596,  -24.144],
\end_layout

\begin_layout Plain Layout

   [  71.533,  -51.089,   11.635], [  66.776,  -53.605,   11.313],
\end_layout

\begin_layout Plain Layout

   [  58.195,  -58.670,    9.658], [  47.559,  -66.027,    5.011],
\end_layout

\begin_layout Plain Layout

   [  38.805,  -73.080,   -1.223], [  30.917,  -79.897,   -7.990],
\end_layout

\begin_layout Plain Layout

   [  23.084,  -86.515,  -14.496], [  12.346,  -95.216,  -22.136],
\end_layout

\begin_layout Plain Layout

   [   4.181, -101.872,  -25.564], [  -2.592, -106.408,  -24.143],
\end_layout

\begin_layout Plain Layout

   [  65.728,  -39.485,   11.392], [  61.113,  -42.245,   10.805],
\end_layout

\begin_layout Plain Layout

   [  52.794,  -47.730,    8.569], [  42.690,  -55.775,    2.756],
\end_layout

\begin_layout Plain Layout

   [  34.276,  -63.620,   -4.593], [  26.346,  -71.302,  -11.993],
\end_layout

\begin_layout Plain Layout

   [  18.302,  -78.838,  -18.618], [   7.307,  -88.848,  -25.731],
\end_layout

\begin_layout Plain Layout

   [  -2.673,  -96.355,  -25.275], [ -10.585, -101.133,  -20.945],
\end_layout

\begin_layout Plain Layout

   [  61.037,  -31.068,   11.178], [  56.593,  -34.046,   10.334],
\end_layout

\begin_layout Plain Layout

   [  48.586,  -39.919,    7.541], [  38.858,  -48.490,    0.967],
\end_layout

\begin_layout Plain Layout

   [  30.606,  -56.862,   -7.217], [  22.586,  -65.148,  -14.918],
\end_layout

\begin_layout Plain Layout

   [  14.461,  -73.390,  -21.616], [   2.834,  -84.424,  -26.997],
\end_layout

\begin_layout Plain Layout

   [  -8.892,  -92.669,  -23.083], [ -17.478,  -97.827,  -17.239],
\end_layout

\begin_layout Plain Layout

   [  55.983,  -23.095,   11.095], [  51.887,  -26.285,    9.635],
\end_layout

\begin_layout Plain Layout

   [  44.187,  -32.568,    6.421], [  34.881,  -41.616,   -1.001],
\end_layout

\begin_layout Plain Layout

   [  26.595,  -50.513,   -9.678], [  18.483,  -59.385,  -17.675],
\end_layout

\begin_layout Plain Layout

   [  10.272,  -68.318,  -23.981], [  -2.822,  -80.419,  -26.400],
\end_layout

\begin_layout Plain Layout

   [ -16.239,  -89.512,  -19.471], [ -26.108,  -95.278,  -11.504],
\end_layout

\begin_layout Plain Layout

   [  49.161,  -13.218,   10.479], [  45.333,  -16.691,    8.692],
\end_layout

\begin_layout Plain Layout

   [  38.102,  -23.514,    4.851], [  29.247,  -33.164,   -3.518],
\end_layout

\begin_layout Plain Layout

   [  20.947,  -42.690,  -12.707], [  12.728,  -52.309,  -20.857],
\end_layout

\begin_layout Plain Layout

   [   3.552,  -62.220,  -25.099], [ -12.003,  -75.656,  -23.496],
\end_layout

\begin_layout Plain Layout

   [ -27.996,  -86.100,  -11.796], [ -39.966,  -92.916,   -0.908],
\end_layout

\begin_layout Plain Layout

   [  40.393,   -2.470,    9.325], [  36.828,   -6.283,    7.276],
\end_layout

\begin_layout Plain Layout

   [  30.192,  -13.631,    2.565], [  21.727,  -24.037,   -6.527],
\end_layout

\begin_layout Plain Layout

   [  13.481,  -34.525,  -15.215], [   4.035,  -45.115,  -21.249],
\end_layout

\begin_layout Plain Layout

   [  -7.639,  -55.817,  -22.705], [ -26.864,  -71.032,  -14.814],
\end_layout

\begin_layout Plain Layout

   [ -46.553,  -83.363,    2.570], [ -61.806,  -91.916,   18.770],
\end_layout

\begin_layout Plain Layout

   [  24.899,   10.201,    8.604], [  21.805,    6.007,    6.065],
\end_layout

\begin_layout Plain Layout

   [  15.674,   -2.037,    0.820], [   6.612,  -13.380,   -7.290],
\end_layout

\begin_layout Plain Layout

   [  -3.677,  -24.731,  -12.877], [ -16.288,  -36.201,  -14.237],
\end_layout

\begin_layout Plain Layout

   [ -31.871,  -48.527,   -8.708], [ -57.898,  -66.172,    8.790],
\end_layout

\begin_layout Plain Layout

   [ -83.927,  -81.623,   35.742], [-105.294,  -93.254,   61.918],
\end_layout

\begin_layout Plain Layout

   [  10.968,   14.240,    9.737], [   7.913,    9.789,    7.595],
\end_layout

\begin_layout Plain Layout

   [   1.266,    1.923,    2.862], [ -10.421,   -8.830,   -2.660],
\end_layout

\begin_layout Plain Layout

   [ -24.086,  -20.184,   -3.422], [ -40.156,  -32.720,    2.171],
\end_layout

\begin_layout Plain Layout

   [ -59.230,  -46.121,   14.120], [ -89.948,  -65.644,   40.217],
\end_layout

\begin_layout Plain Layout

   [-120.530,  -82.678,   73.167], [-145.766,  -96.164,  104.471],
\end_layout

\begin_layout Plain Layout

   [   0.871,   14.216,    9.818], [  -2.141,   10.136,    7.514],
\end_layout

\begin_layout Plain Layout

   [  -8.892,    2.795,    3.306], [ -22.163,   -7.484,    1.231],
\end_layout

\begin_layout Plain Layout

   [ -39.283,  -19.635,    8.144], [ -59.655,  -33.417,   22.466],
\end_layout

\begin_layout Plain Layout

   [ -81.678,  -47.030,   38.659], [-115.568,  -66.325,   67.336],
\end_layout

\begin_layout Plain Layout

   [-148.694,  -83.628,  101.982], [-176.299,  -97.943,  135.610]]),
\end_layout

\begin_layout Plain Layout

 # parameter curves follow
\end_layout

\begin_layout Plain Layout

 [(3, # param_curve 1 - degree
\end_layout

\begin_layout Plain Layout

   # knots:
\end_layout

\begin_layout Plain Layout

   [0.0, 0.0, 0.0, 0.0, 0.25, 0.5, 0.75, 1.0, 1.0, 1.0, 1.0],
\end_layout

\begin_layout Plain Layout

   # control points:
\end_layout

\begin_layout Plain Layout

   [[-0.851, -0.569], [-0.781, -0.624], [-0.622, -0.721],
\end_layout

\begin_layout Plain Layout

    [-0.082, -0.889], [ 0.500, -0.991], [ 0.813, -0.961],
\end_layout

\begin_layout Plain Layout

    [ 0.970, -0.950]]),
\end_layout

\begin_layout Plain Layout

  (3, # param_curve 2 - degree
\end_layout

\begin_layout Plain Layout

   # knots:
\end_layout

\begin_layout Plain Layout

   [0.0, 0.0, 0.0, 0.0, 0.5, 1.0, 1.0, 1.0, 1.0],
\end_layout

\begin_layout Plain Layout

   # control points:
\end_layout

\begin_layout Plain Layout

   [[ 0.970, -0.950], [ 0.719, -0.698], [ 0.298, -0.246],
\end_layout

\begin_layout Plain Layout

    [-0.195,  0.120], [-0.469,  0.328]]),
\end_layout

\begin_layout Plain Layout

  (3, # param_curve 3 - degree
\end_layout

\begin_layout Plain Layout

   # knots:
\end_layout

\begin_layout Plain Layout

   [0.0, 0.0, 0.0, 0.0, 0.5, 1.0, 1.0, 1.0, 1.0],
\end_layout

\begin_layout Plain Layout

   # control points:
\end_layout

\begin_layout Plain Layout

   [[-0.469,  0.328], [-0.575,  0.220], [-0.789, -0.208],
\end_layout

\begin_layout Plain Layout

    [-0.822, -0.476], [-0.851, -0.569]])])
\end_layout

\begin_layout Plain Layout

>>>
\end_layout

\begin_layout Plain Layout


\backslash
end{verbatim}
\end_layout

\end_inset


\end_layout

\end_body
\end_document
